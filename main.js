(()=>{"use strict";var t=document.querySelector("#cardTemplate"),e=document.querySelector(".cards"),n=document.querySelector(".button_action_edit"),r=document.forms.editForm,o=r.querySelector(".popup__submit-button_type_edit"),i=r.elements.name,a=r.elements.about,u=document.querySelector(".button_action_add"),c=document.forms.addForm,l=c.querySelector(".popup__submit-button_type_add"),s=document.querySelector(".button_action_edit-avatar"),f=document.forms.avatarForm,p=document.querySelector(".popup__submit-button_type_avatar"),h=document.querySelector(".popup__submit-button_type_confirm"),y=Array.from(document.querySelectorAll(".popup__form")),v={};function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function m(t,e){k(t,e),e.add(t)}function w(t,e,n){k(t,e),e.set(t,n)}function k(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function S(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,j(t,e,"get"))}function _(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,j(t,e,"set"),n),n}function j(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var E=new WeakMap,O=new WeakMap,P=new WeakMap,C=new WeakMap,T=new WeakMap,W=new WeakMap,L=new WeakMap,M=new WeakMap,q=new WeakMap,R=new WeakMap,I=new WeakSet,x=new WeakSet,A=new WeakSet,D=new WeakSet,U=new WeakSet,z=new WeakSet,B=new WeakSet,F=new WeakSet,V=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,F),m(this,B),m(this,z),m(this,U),m(this,D),m(this,A),m(this,x),m(this,I),w(this,E,{writable:!0,value:void 0}),w(this,O,{writable:!0,value:void 0}),w(this,P,{writable:!0,value:void 0}),w(this,C,{writable:!0,value:void 0}),w(this,T,{writable:!0,value:void 0}),w(this,W,{writable:!0,value:void 0}),w(this,L,{writable:!0,value:void 0}),w(this,M,{writable:!0,value:void 0}),w(this,q,{writable:!0,value:void 0}),w(this,R,{writable:!0,value:void 0}),_(this,E,e.inputSelector),_(this,O,e.errorClassTemplate),_(this,P,e.activeErrorClass),_(this,C,e.errorClass),_(this,T,e.submitButtonSelector),_(this,W,e.inactiveSubmitButtonClass),_(this,L,n),_(this,q,Array.from(S(this,L).querySelectorAll(S(this,E)))),_(this,R,S(this,L).querySelector(S(this,T)))}var e,n;return e=t,(n=[{key:"enableValidation",value:function(){S(this,L).addEventListener("submit",(function(t){t.preventDefault()})),g(this,F,X).call(this)}},{key:"resetValidation",value:function(){var t=this;g(this,B,Q).call(this),S(this,q).forEach((function(e){g(t,x,J).call(t,e),e.classList.remove(S(t,C))}))}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){_(this,M,S(this,L).querySelector("".concat(S(this,O)).concat(t.name))),S(this,M).textContent=t.validationMessage,S(this,M).classList.add(S(this,P))}function J(t){_(this,M,S(this,L).querySelector("".concat(S(this,O)).concat(t.name))),S(this,M).textContent="",S(this,M).classList.remove(S(this,P))}function H(){S(this,R).classList.add(S(this,W)),S(this,R).disabled=!0}function $(){S(this,R).classList.remove(S(this,W)),S(this,R).disabled=!1}function G(t){t.checkValidity()?(g(this,x,J).call(this,t),t.classList.remove(S(this,C))):(g(this,I,N).call(this,t),t.classList.add(S(this,C)))}function K(){return Array.from(S(this,q)).some((function(t){return!t.validity.valid}))}function Q(){g(this,z,K).call(this,S(this,q))?g(this,A,H).call(this):g(this,D,$).call(this)}function X(){var t=this;S(this,q).forEach((function(e){e.addEventListener("input",(function(){g(t,U,G).call(t,e),g(t,B,Q).call(t)}))})),S(this,L).addEventListener("reset",(function(){g(t,A,H).call(t)})),g(this,B,Q).call(this)}function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Y(o)?o:String(o)),r)}var o}function tt(t,e){nt(t,e),e.add(t)}function et(t,e,n){nt(t,e),e.set(t,n)}function nt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rt(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ot(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,at(t,e,"get"))}function it(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,at(t,e,"set"),n),n}function at(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ut=new WeakMap,ct=new WeakMap,lt=new WeakMap,st=new WeakMap,ft=new WeakMap,pt=new WeakMap,ht=new WeakMap,yt=new WeakMap,vt=new WeakMap,dt=new WeakMap,bt=new WeakMap,mt=new WeakMap,wt=new WeakMap,kt=new WeakMap,gt=new WeakSet,St=new WeakSet,_t=new WeakSet,jt=function(){function t(e,n,r,o){var i=o.handleCardClick,a=o.handleDeleteClick,u=o.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt(this,_t),tt(this,St),tt(this,gt),et(this,ut,{writable:!0,value:void 0}),et(this,ct,{writable:!0,value:void 0}),et(this,lt,{writable:!0,value:void 0}),et(this,st,{writable:!0,value:void 0}),et(this,ft,{writable:!0,value:void 0}),et(this,pt,{writable:!0,value:void 0}),et(this,ht,{writable:!0,value:void 0}),et(this,yt,{writable:!0,value:void 0}),et(this,vt,{writable:!0,value:void 0}),et(this,dt,{writable:!0,value:void 0}),et(this,bt,{writable:!0,value:void 0}),et(this,mt,{writable:!0,value:void 0}),et(this,wt,{writable:!0,value:void 0}),et(this,kt,{writable:!0,value:void 0}),it(this,lt,e.name),it(this,st,e.link),it(this,ft,e.likes),it(this,ct,n),this.cardId=e._id,it(this,pt,r),it(this,ht,e.owner._id),it(this,vt,i),it(this,dt,a),it(this,bt,u)}var e,n;return e=t,(n=[{key:"deleteCard",value:function(){ot(this,ut).remove(),it(this,ut,null)}},{key:"setLike",value:function(){ot(this,mt).classList.add("button__like_active")}},{key:"removeLike",value:function(){ot(this,mt).classList.remove("button__like_active")}},{key:"isLiked",value:function(){var t=this;return ot(this,ft).some((function(e){return e._id===ot(t,pt)}))}},{key:"getLikesCounter",value:function(t){ot(this,yt).textContent=t.likes.length,it(this,ft,t.likes)}},{key:"generateCard",value:function(){return it(this,ut,rt(this,gt,Et).call(this)),it(this,kt,ot(this,ut).querySelector(".card__image")),ot(this,kt).src=ot(this,st),ot(this,kt).alt="Фотография ".concat(ot(this,lt)),ot(this,ut).querySelector(".card__title").textContent=ot(this,lt),it(this,wt,ot(this,ut).querySelector(".button_action_delete")),it(this,mt,ot(this,ut).querySelector(".button__like")),it(this,yt,ot(this,ut).querySelector(".card__like_counter")),ot(this,yt).textContent=ot(this,ft).length,ot(this,pt)!==ot(this,ht)&&ot(this,wt).remove(),rt(this,St,Ot).call(this),rt(this,_t,Pt).call(this),ot(this,ut)}}])&&Z(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Et(){return ot(this,ct).content.querySelector(".card").cloneNode(!0)}function Ot(){this.isLiked()?this.setLike():this.removeLike()}function Pt(){var t=this;ot(this,mt).addEventListener("click",(function(){ot(t,bt).call(t,t.cardId)})),ot(this,wt).addEventListener("click",(function(){ot(t,dt).call(t,t.cardId)})),ot(this,kt).addEventListener("click",(function(){ot(t,vt).call(t,ot(t,lt),ot(t,st))}))}function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ct(o)?o:String(o)),r)}var o}function Wt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Lt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,qt(t,e,"get"))}function Mt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,qt(t,e,"set"),n),n}function qt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Rt=new WeakMap,It=new WeakMap,xt=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wt(this,Rt,{writable:!0,value:void 0}),Wt(this,It,{writable:!0,value:void 0}),Mt(this,It,r),Mt(this,Rt,n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){Lt(e,It).call(e,t)}))}},{key:"addItem",value:function(t){Lt(this,Rt).prepend(t)}}])&&Tt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==At(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===At(o)?o:String(o)),r)}var o}function Ut(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function zt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Bt(t,e,"get"))}function Bt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ft=new WeakMap,Vt=new WeakMap,Nt=new WeakMap,Jt=function(){function t(e){var n,r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,Ft,{writable:!0,value:void 0}),Ut(this,Vt,{writable:!0,value:function(t){"Escape"===t.key&&i.close()}}),Ut(this,Nt,{writable:!0,value:function(t){t.target.classList.contains("popup_opened")&&i.close()}}),this.popup=document.querySelector(e),n=this,r=Ft,o=this.popup.querySelector(".button_action_close"),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(n,Bt(n,r,"set"),o)}var e,n;return e=t,(n=[{key:"open",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",zt(this,Vt))}},{key:"close",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",zt(this,Vt))}},{key:"setEventListeners",value:function(){var t=this;zt(this,Ft).addEventListener("click",(function(){t.popup.classList.contains("popup_opened")&&t.close()})),document.addEventListener("mousedown",zt(this,Nt))}}])&&Dt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ht(o)?o:String(o)),r)}var o}function Gt(){return Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Gt.apply(this,arguments)}function Kt(t,e){return Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kt(t,e)}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function Yt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Zt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ee(t,e,"get"))}function te(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ee(t,e,"set"),n),n}function ee(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ne=new WeakMap,re=new WeakMap,oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xt(r);if(o){var n=Xt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qt(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Yt(Qt(e=i.call(this,t)),ne,{writable:!0,value:void 0}),Yt(Qt(e),re,{writable:!0,value:void 0}),te(Qt(e),ne,e.popup.querySelector(".popup__image")),te(Qt(e),re,e.popup.querySelector(".popup__caption")),e}return e=a,(n=[{key:"open",value:function(t,e){Zt(this,ne).src=e,Zt(this,ne).alt="Фотография ".concat(t),Zt(this,re).textContent=t,Gt(Xt(a.prototype),"open",this).call(this)}}])&&$t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Jt);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fe(r.key),r)}}function ue(t,e){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ue(t,e)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function le(){return le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},le.apply(this,arguments)}function se(t){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},se(t)}function fe(t){var e=function(t,e){if("object"!==ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ie(e)?e:String(e)}function pe(t,e,n){he(t,e),e.set(t,n)}function he(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ye(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,de(t,e,"get"))}function ve(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,de(t,e,"set"),n),n}function de(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var be=new WeakMap,me=new WeakMap,we=new WeakMap,ke=new WeakMap,ge=new WeakSet,Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=se(r);if(o){var n=se(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}(this,t)});function a(t){var e,n,r,o,u=t.popupSelector,c=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),he(r=ce(n=i.call(this,u)),o=ge),o.add(r),pe(ce(n),be,{writable:!0,value:void 0}),pe(ce(n),me,{writable:!0,value:void 0}),pe(ce(n),we,{writable:!0,value:void 0}),pe(ce(n),ke,{writable:!0,value:void 0}),function(t,e,n){(e=fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(ce(n),"close",(function(){le((e=ce(n),se(a.prototype)),"close",e).call(e),ye(ce(n),me).reset()})),ve(ce(n),be,c),ve(ce(n),me,n.popup.querySelector(".popup__form")),ve(ce(n),we,n.popup.querySelectorAll(".popup__input")),n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;le(se(a.prototype),"setEventListeners",this).call(this),ye(this,me).addEventListener("submit",(function(e){e.preventDefault(),ye(t,be).call(t,function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(t,ge,_e).call(t))}))}}])&&ae(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Jt);function _e(){var t=this;return ve(this,ke,{}),ye(this,we).forEach((function(e){ye(t,ke)[e.name]=e.value})),ye(this,ke)}function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==je(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===je(o)?o:String(o)),r)}var o}function Oe(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Pe(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Te(t,e,"get"))}function Ce(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Te(t,e,"set"),n),n}function Te(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var We=new WeakMap,Le=new WeakMap,Me=new WeakMap,qe=new WeakMap,Re=function(){function t(e){var n=e.nameSelector,r=e.aboutSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,We,{writable:!0,value:void 0}),Oe(this,Le,{writable:!0,value:void 0}),Oe(this,Me,{writable:!0,value:void 0}),Oe(this,qe,{writable:!0,value:void 0}),Ce(this,We,document.querySelector(n)),Ce(this,Le,document.querySelector(r)),Ce(this,Me,document.querySelector(o))}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return Ce(this,qe,{name:Pe(this,We).textContent,about:Pe(this,Le).textContent}),Pe(this,qe)}},{key:"setAvatar",value:function(t){Pe(this,Me).src=t.avatar}},{key:"setUserInfo",value:function(t){Pe(this,We).textContent=t.name,Pe(this,Le).textContent=t.about}}])&&Ee(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ie(o)?o:String(o)),r)}var o}function Ae(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function De(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ze(t,e,"get"))}function Ue(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ze(t,e,"set"),n),n}function ze(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Be=new WeakMap,Fe=new WeakMap,Ve=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,Be,{writable:!0,value:void 0}),Ae(this,Fe,{writable:!0,value:void 0}),Ue(this,Be,e.baseUrl),Ue(this,Fe,e.headers)}var e,n;return e=t,(n=[{key:"getInitialInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getInitialCards",value:function(){return fetch(De(this,Be)+"/cards",{headers:De(this,Fe)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"getUserInfo",value:function(){return fetch(De(this,Be)+"/users/me",{headers:De(this,Fe)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"updateUserInfo",value:function(t){var e=t.name,n=t.about;return fetch(De(this,Be)+"/users/me",{method:"PATCH",headers:De(this,Fe),body:JSON.stringify({name:e,about:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"addCard",value:function(t){var e=t.title,n=t.link;return fetch(De(this,Be)+"/cards",{method:"POST",headers:De(this,Fe),body:JSON.stringify({name:e,link:n})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"updateAvatar",value:function(t){return fetch(De(this,Be)+"/users/me/avatar",{method:"PATCH",headers:De(this,Fe),body:JSON.stringify({avatar:t["avatar-link"]})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"deleteCard",value:function(t){return fetch(De(this,Be)+"/cards/"+t,{method:"DELETE",headers:De(this,Fe)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"likeCard",value:function(t){return fetch(De(this,Be)+"/cards/"+t+"/likes",{method:"PUT",headers:De(this,Fe)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"unlikeCard",value:function(t){return fetch(De(this,Be)+"/cards/"+t+"/likes",{method:"DELETE",headers:De(this,Fe)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}}])&&xe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ne(o)?o:String(o)),r)}var o}function He(){return He="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ke(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},He.apply(this,arguments)}function $e(t,e){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$e(t,e)}function Ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}function Qe(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Xe(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ze(t,e,"get"))}function Ye(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ze(t,e,"set"),n),n}function Ze(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var tn=new WeakMap,en=new WeakMap,nn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$e(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ke(r);if(o){var n=Ke(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ge(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Qe(Ge(e=i.call(this,t)),tn,{writable:!0,value:void 0}),Qe(Ge(e),en,{writable:!0,value:void 0}),Ye(Ge(e),tn,e.popup.querySelector(".popup__form")),e}return e=a,(n=[{key:"handleConfirm",value:function(t){Ye(this,en,t)}},{key:"setEventListeners",value:function(){var t=this;He(Ke(a.prototype),"setEventListeners",this).call(this),Xe(this,tn).addEventListener("submit",(function(e){e.preventDefault(),Xe(t,en).call(t)}))}}])&&Je(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Jt);function rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var on,an,un=new Ve({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"65b7fcf6-b316-4d1e-9510-010044d65d75","Content-Type":"application/json"}}),cn=new Re({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar"}),ln=new Se({popupSelector:".popup_type_edit",handleFormSubmit:function(t){o.textContent="Сохранение...",un.updateUserInfo(t).then((function(t){cn.setUserInfo(t)})).then((function(){ln.close()})).catch((function(t){console.log(t)})).finally((function(){o.textContent="Сохранить"}))}}),sn=new Se({popupSelector:".popup_type_add",handleFormSubmit:function(t){l.textContent="Сохранение...",un.addCard(t).then((function(t){var e=vn(t);yn.addItem(e)})).then((function(){sn.close()})).catch((function(t){console.log(t)})).finally((function(){l.textContent="Сохранить"}))}}),fn=new Se({popupSelector:".popup_type_avatar",handleFormSubmit:function(t){p.textContent="Сохранение...",un.updateAvatar(t).then((function(t){cn.setAvatar(t)})).then((function(){fn.close()})).catch((function(t){console.log(t)})).finally((function(){p.textContent="Сохранить"}))}}),pn=new nn(".popup_type_confirm"),hn=new oe(".popup_type_image"),yn=new xt({renderer:function(t){var e=vn(t);yn.addItem(e)}},e),vn=function(e){var n=new jt(e,t,on,{handleCardClick:function(t,e){hn.open(t,e)},handleDeleteClick:function(t){pn.open(),h.textContent="Да",pn.handleConfirm((function(){un.deleteCard(t).then((function(){n.deleteCard()})).then((function(){pn.close()})).catch((function(t){console.log(t)})).finally((function(){h.textContent="Удаление..."}))}))},handleLikeClick:function(t){n.isLiked()?un.unlikeCard(t).then((function(t){n.removeLike(),n.getLikesCounter(t)})).catch((function(t){console.log(t)})):un.likeCard(t).then((function(t){n.setLike(),n.getLikesCounter(t)})).catch((function(t){console.log(t)}))}});return n.generateCard()};function dn(t){v[t.name].resetValidation()}n.addEventListener("click",(function(){var t=cn.getUserInfo();i.value=t.name,a.value=t.about,dn(r),ln.open()})),u.addEventListener("click",(function(){dn(c),sn.open()})),s.addEventListener("click",(function(){dn(f),fn.open()})),ln.setEventListeners(),sn.setEventListeners(),fn.setEventListeners(),hn.setEventListeners(),pn.setEventListeners(),an={inputSelector:".popup__input",errorClassTemplate:".popup__input-error_type_",activeErrorClass:"popup__input-error_active",errorClass:"popup__input_type_error",submitButtonSelector:".popup__submit-button",inactiveSubmitButtonClass:"popup__submit-button_disabled"},y.forEach((function(t){var e=new V(an,t),n=t.name;v[n]=e,e.enableValidation()})),un.getInitialInfo().then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,n)||function(t,e){if(t){if("string"==typeof t)return rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rn(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];cn.setUserInfo(o),on=o._id,cn.setAvatar(o),yn.renderItems(i)})).catch((function(t){console.log(t)}))})();
//# sourceMappingURL=main.js.map